<%- include('partials/head') %>
<%- include('partials/sidebar') %>

  <%- include('partials/topbar') %>

<div class="content">
  <h1 class="page-title">Currencies</h1>

  <!-- Add Currency Form -->
  <% if (userRole === 'superadmin' || hasFullAccess || (userPermissions && userPermissions.currencies && userPermissions.currencies.create)) { %>
  <div class="form-wrap mb-6">
    <form action="/currencies" method="POST" class="currency-form">
      <div class="form-group">
        <label for="code">Currency Code</label>
        <input type="text" id="code" name="code" placeholder="e.g. USD" required />
      </div>

      <div class="form-group">
        <label for="name">Currency Name</label>
        <input type="text" id="name" name="name" placeholder="e.g. US Dollar" required />
      </div>

      <div class="form-group">
        <label for="symbol">Symbol</label>
        <input type="text" id="symbol" name="symbol" placeholder="$" />
      </div>

      <div class="form-group">
        <label for="rate">Exchange Rate</label>
        <input type="number" step="0.01" id="rate" name="rate" placeholder="1.00" />
      </div>

      <div class="form-group full-width">
        <button type="submit" class="btn-submit btn-small">Add Currency</button>
      </div>
    </form>
  </div>
  <% } %>

  <!-- Currencies Table -->
  <div class="table-wrap">
    <table class="orders-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Code</th>
          <th>Name</th>
          <th>Symbol</th>
          <th>Rate</th>
        </tr>
      </thead>
      <tbody>
        <% currencies.forEach((c, i) => { %>
          <tr>
            <td><%= c.id || (i+1) %></td>
            <td><%= c.code %></td>
            <td><%= c.name %></td>
            <td><%= c.symbol || "-" %></td>
            <td><%= c.rate || "1.00" %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<script src="/js/dashboard.js"></script>
<%- include('partials/footer') %>
